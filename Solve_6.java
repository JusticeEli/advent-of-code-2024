import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class Solve_6 {
    public static void main(String[] args) {
        Solve_6 solve_6 = new Solve_6();
 /*       String input =
                "....#.....\n" +
                ".........#\n" +
                "..........\n" +
                "..#.......\n" +
                ".......#..\n" +
                "..........\n" +
                ".#..^.....\n" +
                "........#.\n" +
                "#.........\n" +
                "......#...\n";*/
        System.out.println("output: " + solve_6.solve(input));
    }


    int solve(String s) {
        fillMapArray(s);
        setInitialDirection();
        while (canMoveForward()) {
            if (obstacleForward())
                changeDirection();
            else
                moveForward();
        }
        return count;
    }

    void setInitialDirection() {
        int[] pos = getInitialPosition();
       // System.out.println("pos: "+Arrays.toString(pos));
        int x = pos[0];
        int y = pos[1];
        i = x;
        j = y;
        if (map[x][y] == '^') north = true;
        else if (map[x][y] == '>') east = true;
        else if (map[x][y] == '<') west = true;
        else south = true;
       // System.out.println("init direction: north: "+north);
    }

    int[] getInitialPosition() {
        int m = map.length;
        int n = map[0].length;
        for (int i = 0; i < m; i++)
            for (int j = 0; j < n; j++) {
                if (map[i][j] != '#' && map[i][j] != '.') return new int[]{i, j};
            }

        return null;
    }

    char[][] map;
    boolean[][] visited;
    int m, n;

    void fillMapArray(String s) {
        String[] lines = getLines(s);
        m = lines.length;
        n = lines[0].length();
        map = new char[m][n];
        visited = new boolean[m][n];
        for (int i = 0; i < m; i++) {
            for (int j = 0; j < n; j++) {
                char ch = lines[i].charAt(j);
                map[i][j] = ch;
            }

        }

        for(char[]chars:map){
         //   System.out.println(Arrays.toString(chars));
        }
    }

    String[] getLines(String s) {
        List<String> list = new ArrayList<>();
        StringBuilder sb = new StringBuilder();
        for (char ch : s.toCharArray()) {
            if (ch == '\n') {
                list.add(sb.toString());
                sb.setLength(0);
            } else {
                sb.append(ch);
            }
        }
        String[] lines = new String[list.size()];
        for (int i = 0; i < lines.length; i++)
            lines[i] = list.get(i);

        return lines;
    }

    boolean north, south, east, west;

    void changeDirection() {
        if (north) {
            east = true;
            north = false;
        } else if (south) {
            west = true;
            south = false;
        } else if (east) {
            south = true;
            east = false;
        } else if (west) {
            north = true;
            west = false;
        }
    }

    int count = 1;
    int i, j;

    void moveForward() {
        if (!visited[i][j])
            count++;
        visited[i][j] = true;
        if (north)
            i--;
        else if (south)
            i++;
        else if (east)
            j++;
        else if (west)
            j--;
    }

    boolean obstacleForward() {
        if (north) {
            if (map[i - 1][j] == '#') return true;
        } else if (south) {
            if (map[i + 1][j] == '#') return true;
        } else if (east) {
            if (map[i][j + 1] == '#') return true;
        } else if (west) {
            if (map[i][j - 1] == '#') return true;
        }


        return false;
    }

    boolean canMoveForward() {

        if (north) {
            if (i > 0) return true;
        } else if (south) {
            if (i < m - 1) return true;
        } else if (east) {
            if (j < n - 1) return true;
        } else if (west) {
            if (j > 0) return true;
        }
        return false;
    }
    static String input=
            "......#...........#..............................#..............................#...........................##...............#....\n" +
            ".............#..............#........#......##...................................................#............##...#..........#...\n" +
            "...#..................#..............#.........#...#.........................................................................#..#.\n" +
            ".....#..........#...................#.....................#..........#...........#......#..#...................#..................\n" +
            "...#...............................................##..................#............#.....#...................#...................\n" +
            ".#.#..#...................#.##.................#..........#................................#......#.........##..................#.\n" +
            "....................#...................#....#.........#....................#....................................................#\n" +
            "..........#......#...................................................................................................#....#.......\n" +
            ".#...............#.........#...........#...............#...................#......#...............................................\n" +
            "............#...........#........#..##.......#........#.....#................................##...................................\n" +
            "...................#.#.............###.................##.................#.......................#.....#..............##.........\n" +
            ".........................#...#............................#......#.......................#........................................\n" +
            ".....................#..............................................#.......#......##......................................#......\n" +
            "............................#.#............................................................................#.................#....\n" +
            ".#.....#.......................................................#..........#.......................................................\n" +
            "..............#..............................#.....#....#........#....................#....#.#...........#.#..................#...\n" +
            "........................#...#...##......#...........................#.............#............................#..................\n" +
            "...#........................................................#...#...........................#...#...............#........#........\n" +
            ".........#..#..........#.....................................#..................................................................#.\n" +
            "...........................................#.........#....#........................................#..#...........#...............\n" +
            "..#..........#...........................................................................................#..............#.........\n" +
            "...#.......#......................................#...............#...............................................................\n" +
            ".#........#......#.#....................................#...#...........#..........#........#.#.......#.......................#...\n" +
            "......................#...........#......##....................#..................#......#..............................#.......#.\n" +
            "..............#......................#..............#...#.#............................................................#.#........\n" +
            "..............#..................#...#..................#...#.....#...#...............#...........................................\n" +
            ".............#............................##..#...#...............................................................##..............\n" +
            "..#............................#.......#.#....................................#...................................................\n" +
            ".......#.....#..........#......#.....#...................................#...........................#......#....#..............#.\n" +
            ".#.................#.............................................#................#.............#.....#....................#......\n" +
            "..............#.........#..#.....#...........#..............................#.................................#............#......\n" +
            "....#.#............#............................................................#..........#......................................\n" +
            ".........................................#.......#......#....................................#.....................#...#......#...\n" +
            "....#.............................#....................................#..........#................................#..............\n" +
            ".........#..#......#..............................................................#....................#..........................\n" +
            ".......................................................##...#........#......................................................#.#..#\n" +
            "..........................#.......##..##................................................................................#.........\n" +
            "..................................##..................................................................#..........................#\n" +
            ".#..................................................#..............#.....................#.....#..................................\n" +
            ".......##........................#......................................................#..........#..............................\n" +
            ".........#....#....#.........#.#........................#...#.....................................................#.....#.........\n" +
            "....#.............................#....#....................#.....................#.....#......#.....................#..........#.\n" +
            "............................................................................................#..........#......#...................\n" +
            "..................................................................................#..........................#.#.....#.........#..\n" +
            "..................................................#...................................................#......#.....#............#.\n" +
            "..........................................^#................................................................................#.....\n" +
            "...............#..........#.............................................#.....#....#...................#................#.........\n" +
            "#..#....#........#........#.........#.......#.................#.......................#.#.............#...................#.......\n" +
            "..#................................................................#......................................#.......................\n" +
            "........#......................#.....................##.#..........#.............................#.............................#..\n" +
            "....#..........#........................#.........................................................................................\n" +
            "......#...#.#.#.........#.................#.....#.....#...#......#..................................................##........#...\n" +
            "...#....#....................#...................................................................#......#...............#.........\n" +
            "..#.......#.........................#..........#........#............................#......#....................#................\n" +
            ".................................#.......................................#....................................................#..#\n" +
            "......................#...#........................#.......................#.............#........................................\n" +
            "......#.......#...................................................................................................#...............\n" +
            ".............#............#......#............................#...........................................##......................\n" +
            "..........................#.....................................................................................#.................\n" +
            "....#..............................#......................#........................................#....#...........#.............\n" +
            "................#.......#.........................................................................................................\n" +
            ".............#............#........#.....#.........#.#.#............................#..........#..............#....#.......#.....#\n" +
            "..#.....#...............................................................................................#...............#.........\n" +
            ".......#...........#............#................#.......................................#..........................#......#......\n" +
            "..........#........................................#......................#............#....................................#..#..\n" +
            ".......#......#..............................#........................................................#.#.................#.......\n" +
            ".#.................#..#.....................................................................................#...........##........\n" +
            "#...................................#........................................#..............#.##........#..#.#.............#......\n" +
            "......#...............#........#....#.........#.........#...#.......................#...........................#............#....\n" +
            "...#...................................................................................#.......................................#..\n" +
            ".....#.......................................#................#...............................................................#...\n" +
            ".#................................................##................................#....................#...............#........\n" +
            ".................................................#..#..................#.......#........................#...............#.....#...\n" +
            ".....##.#.............................#.....................#................................................................#...#\n" +
            "...........#....................#...........#...............#.................................................#.......#.......#..#\n" +
            "........#....................................................#.....#....#.........................................#.....#.#.......\n" +
            "...............#..........................#............#.#.................................................#......................\n" +
            "...........#......#.....................#...................................................................#.#..............#....\n" +
            "......#...#.........................#..........................................................#..................................\n" +
            ".....................#................................................#..#........................................................\n" +
            "..............#.................#............#....................#.#.......................................#............#........\n" +
            "............#.....................#................#......#..........................#.#.........#............#...................\n" +
            "........................................................................#.....................#...................................\n" +
            ".............................#....................................................................................................\n" +
            ".........................#...#..........................................#............................................#............\n" +
            "..#...............................#.....#.....#.............#.......#..#.................##.#.......................#.........#.#.\n" +
            "......................................#...........................................................................................\n" +
            "...........#.....................................#................#...#.........................#........................#........\n" +
            "..#...#..#..........................#.......#....#......................................................#................#........\n" +
            ".....................................#...#.#........#...............#..#......#.....................................#...#.........\n" +
            ".#..............#..............................................................#.........................##......................#\n" +
            "..........#..................................#....#.........#...#.#..........#...#...................................##...........\n" +
            "...............#.....................................................................................................#............\n" +
            ".#.......#....................#...#..........................#.#...............#......................#........#.................#\n" +
            ".............#....................#........................#..................#......#....#....#..................................\n" +
            "........#..............................................................#.....................#....................................\n" +
            ".......................#..............#.............#......#.........................................#.........................#..\n" +
            ".......#.......#.#........#.......................#..#.......................................................#.#..................\n" +
            "...............#..#....#.......................#.....#..............................#..................#.....................#....\n" +
            "......#..............#...........................#............................##...........................#......................\n" +
            ".......................................#........#................................#..........................#.....................\n" +
            ".#.....................................#............#.............................................................#..#............\n" +
            "..................#..................#.........................#............#..........#.........................#...#............\n" +
            ".......................................................#..............#..........................................................#\n" +
            "...#....#..#...#..#...................##....................#.....................#...................#.....#..........#..........\n" +
            ".......................#........#....................##.................#.......................................................#.\n" +
            "........#.......#.......................#.#......##...##........#..##.........................................#...............##..\n" +
            "....#..........................#.........##..#......#...........................#........#........#...#...........................\n" +
            "...#..........................#.....#.....................................#.......................................................\n" +
            "....................................##.......#..............................#.............#...#......#.............#..............\n" +
            ".#..............................#...............................................................................................#.\n" +
            ".....#................................................................................##.....#..............#.#...................\n" +
            "...........................................................................................#....#................#................\n" +
            "...#..#...................................................#....#.......#.......#.................................#........#.......\n" +
            ".#....#....................#..............................................................................#.............#.......#.\n" +
            ".........#.................#.......................................#...........#......#.......#............#............#.........\n" +
            "........................................#...............................#.........................................................\n" +
            "..............#....#......................#..........#........#.....................................#...........#..........#......\n" +
            "......##....#.............#..........#......................#.........................................##..........................\n" +
            "....................#.............................#.....................##.#..........#..#......................###.........#.....\n" +
            ".#.......................................##........................#.....#.....#..#...............................................\n" +
            "..............................#............................#.......................................................##.............\n" +
            ".........#.............................#..............#......#.....#..............#.#............................#........#....#..\n" +
            "............#..............#.............................#..........................#.............................#...............\n" +
            ".................#...........#..............#.....#..............................#.............#................#.....#...........\n" +
            "........#.....................#........#.....................................#..........................#......#.#................\n" +
            ".....................................................#..#........................#.##..#.........#................................\n" +
            "......#..............................................#..........................#...............................#..........#......\n" +
            ".................................................#.................##.......................#...................................#.\n" +
            "....................#.....#.......#.............#................................#..........#...#.................................\n";
}
